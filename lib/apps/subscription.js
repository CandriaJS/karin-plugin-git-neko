import {c}from'../chunk-UBICTORI.js';import {b}from'../chunk-SWUTSNE3.js';import g,{logger}from'node-karin';var u=g.command(/^#?(?:(?:清语)?Git插件|git-plugin)?(?:GitHub)(?:仓库|repo)(?:订阅|subscription)\s*([\w-]+)[\/\s]+([\w-]+)/i,async r=>{try{let o=r.msg.match(u.reg),[,i,s]=o;if(!r.isGroup&&r.isPrivate)throw new Error("\u55B5\u545C~, \u8BF7\u5728\u7FA4\u804A\u4E2D\u4F7F\u7528\u6B64\u547D\u4EE4");let c$1=["push"],e="groupId"in r?r.groupId:"",n=r.userId,a=r.selfId;if(await c.get_subscription(i,s,a,n,e))throw new Error("\u55B5\u545C~, \u60A8\u5DF2\u7ECF\u8BA2\u9605\u8FC7\u6B64\u4ED3\u5E93");try{await c.add_subscription(i,s,c$1,a,n,e),await r.reply(`\u8BA2\u9605: ${i}/${s} \u6210\u529F`);}catch{throw new Error("\u55B5\u545C~, \u6DFB\u52A0\u8BA2\u9605\u5931\u8D25, \u8BF7\u5C1D\u8BD5\u91CD\u8BD5\u6216\u8054\u7CFB\u7BA1\u7406\u5458")}}catch(o){logger.error(o),await r.reply(`[${b.Plugin_AliasName}]: ${o.message}`);}},{name:"\u6E05\u8BEDGit\u63D2\u4EF6:\u7EC4\u7EC7\u4ED3\u5E93\u5217\u8868",priority:-1/0,event:"message",permission:"all"});export{u as subscription};