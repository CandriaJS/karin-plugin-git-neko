import {e,c}from'../chunk-UBICTORI.js';import {d as d$1,b}from'../chunk-SWUTSNE3.js';import _,{logger}from'node-karin';var d=_.command(/^#?(?:(?:清语)?Git插件|git-plugin)?GitHub(?:用户|user)(?:信息|info)\s*(.*)/i,async e$1=>{try{let a=e$1.msg.match(d.reg);if(!a)throw new Error("\u55B5\u545C~ \u8BF7\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u7528\u6237\u540D");let[,r]=a,i=await e.get_user_token(e$1.userId),o=await c.get_github(i).get_user(),t;if(r)t=await o.get_user_info({username:r});else {if(!i)throw new Error("\u55B5\u545C~ \u8BF7\u5148\u8FDB\u884C\u5E94\u7528\u5B89\u88C5\u7136\u540E\u8FDB\u884C\u6388\u6743\u5B89\u88C5");t=await o.get_user_info_by_token();}r=t.data.login;let l=await o.get_user_contribution({username:r}),m=await d$1.render("user/get_user_info",{type:"github",username:t.data.login,name:t.data.name,avatar:t.data.avatar_url,bio:t.data.bio,email:t.data.email??"\u672A\u516C\u5F00\u6216\u672A\u77E5",location:t.data.location??"\u672A\u516C\u5F00\u6216\u672A\u77E5",company:t.data.company??"\u672A\u516C\u5F00\u6216\u672A\u77E5",blog:t.data.blog,created_at:t.data.created_at,updated_at:t.data.updated_at,repos_count:t.data.public_repos,followers_count:t.data.followers,following_count:t.data.following,contribution_data:l.data});return await e$1.reply(m),!0}catch(a){logger.error(a),await e$1.reply(`[${b.Plugin_AliasName}]: ${a.message}`);}},{name:"\u6E05\u8BEDGit\u63D2\u4EF6:\u7528\u6237\u4FE1\u606F",priority:-1/0,event:"message",permission:"all"});export{d as get_user_info};