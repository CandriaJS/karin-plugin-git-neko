import {e,c}from'../chunk-UBICTORI.js';import {d as d$1,b}from'../chunk-SWUTSNE3.js';import {get_relative_time}from'git-neko-kit';import k from'markdown-it';import d,{logger}from'node-karin';var v=d.command(/^#?(?:(?:清语)?Git插件|git-neko-plugin)?GitHub(?:议题|issue)(?:信息|info)\s*([\w-]+)[\/\s]+([\w-]+)\s+(\d+)/i,async t=>{try{let e$1=t.msg.match(v.reg),[,i,r,o]=e$1,u=await e.get_user_token(t.userId),n=c.get_github(u),s=await(await n.get_issue()).get_issue_info({owner:i,repo:r,issue_number:Number(o)}),a=await(await n.get_repo()).get_repo_info({owner:i,repo:r}),m=a.data.private,w=a.data.stargazers_count,f=a.data.forks_count,h=new k({html:!0}).render(s.data.body),y=await d$1.render("issue/get_issue_info",{platform:"github",owner:i,repo:r,visibility:m,star_count:w,fork_count:f,author_name:s.data.user.login,author_avatar:s.data.user.avatar_url,issue_title:s.data.title,issue_state:s.data.state,issue_created_at:await get_relative_time(s.data.created_at),issue_number:o,issue_body:h});await t.reply(y);}catch(e){logger.error(e),await t.reply(`[${b.Plugin_AliasName}]: ${e.message}`);}},{name:"\u6E05\u8BEDGit\u63D2\u4EF6:\u8BAE\u9898\u4FE1\u606F",priority:-1/0,event:"message",permission:"all"}),G=d.command(/^#?(?:(?:清语)?Git插件|git-neko-plugin)?GitHub(?:议题|issue)(?:创建|create)\s*([\w-]+)[\/\s]+([\w-]+)\s+(.+)/i,async t=>{try{let e$1=t.msg.match(G.reg),[,i,r,o]=e$1,u=await e.get_user_token(t.userId),n=c.get_github(u);await t.reply('\u8BF7\u8F93\u5165Issue\u5185\u5BB9, \u8F93\u5165"\u65E0"\u8868\u793A\u4E0D\u8F93\u5165\u5185\u5BB9');let c$1=await d.ctx(t),s=await n.get_issue(),a=c$1.msg.trim();c$1.msg.trim()==="\u65E0"&&(a=null);let m=await s.create_issue({owner:i,repo:r,title:o,body:a});await t.reply(`[${b.Plugin_AliasName}]: Issue\u521B\u5EFA\u6210\u529F, Issue\u94FE\u63A5: ${m.data.html_url}`);}catch{}});export{G as create_issue,v as get_issue_info};